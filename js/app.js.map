{"version":3,"sources":["webpack:///webpack/bootstrap 60e0d5d2b419dcd1724d","webpack:///./js/app.js","webpack:///./js/_modules/_main.js"],"names":["window","pixi_test","isDebug","$","main","Main","e","myRound","Math","round","myCeil","ceil","myRandom","random","mySin","sin","myCos","cos","mySqrt","sqrt","myPI","PI","myPow","a","b","c","i","myPow2","myAbs","myFloor","myHypot","myTrace","ary","console","log","toRadian","getDecimalLength","num","splittedNum","split","len","length","Container","PIXI","autoDetectRenderer","loader","resources","Sprite","STAGE_WIDTH","STAGE_HEIGHT","containers","MAX_CONTAINERS","layerIDs","isEnd","difficulty","isKeyboard","confirm","fogColor","stage","rendererP","antialias","transparent","resolution","document","body","appendChild","view","setAttribute","interactive","texturePlayer","textureSpAtk","textureSnow4","textureSnow8","textureSnow16","textureSnow24","textureSnow32","textureSnow40","textureSnow48","textureSnow56","textureSnow64","textureBit","textureBitDisabled","player","spatk","spatkArc","state","bullets","patterns","prevPattern","bits","currentBitRadius","frameCnt","buzzCnt","scoreRatio","prevScoreRatio","rawScore","totalScore","remainingTime","prevRemainingTime","overallRemainingTime","prevOverallRemainingTime","overallEndFrame","blurFilter","filters","BlurFilter","blurFilter2","bloomFilter","BloomFilter","textObj","threeObj","stats","loadObjects","loadedCnt","maxObj","pixiLoaderCallBack","callSetup","add","load","threeLoader","name","mtlName","objName","mtlLoader","THREE","MTLLoader","setPath","materials","preload","objLoader","OBJLoader","setMaterials","object","traverse","child","Mesh","castShadow","setup","DisplayObjectContainer","position","x","y","addChild","Texture","fromFrame","width","height","defX","defY","anchor","lastX","lastY","vx","vy","spd","spdSlow","keyLeft","keyRight","keyUp","keyDown","keySlow","keySlowPrev","keySp","mouseX","mouseY","hitRadius","buzzRadius","isHit","life","prevLife","isInvincible","hittedFrame","changedFrame","isUsed","usable","push","keys","keyboard","left","press","release","up","right","down","slow","sp","mousemove","mouseData","plugins","interaction","mouse","global","scoreTtl","Text","font","fill","scoreNum","align","buzzTtl","buzzNum","remainingTimeTtl","remainingTimeNum","Object","forEach","key","ui","playState","blur","bg","ptn","shift","Stats","domElement","style","top","zIndex","callBG","gameLoop","requestAnimationFrame","alert","render","getPtn","movePlayer","callAddBullet","moveBullets","moveBits","setSpAtkUsable","changeSpAtk","spHitCheck","drawSpAtk","buzzCheck","onHit","removeBullets","addScore","refreshText","update","currentPtn","currentOffsettedFrame","offsettedEndFrame","addBullet","randomDegree","myDegree","myRadian","myDefX","myDefY","radius","offsetDegree","isReverse","synVecX","synVecY","degree","atan2","setEraseBullets","showedTotalScore","textAlpha","lifeTxt","setText","alpha","removeChild","Graphics","lineStyle","arc","myCnt","erase","eraseBits","addBits","j","layer","splice","myBit","maxRadius","minRadius","radian","blendMode","BLEND_MODES","ADD","offsettedFrame","myOptions","bullet","eraseX","eraseY","vec","nVec","atk","createdFrame","buzzed","toX","toY","getNVec","option0","option1","option2","option3","option4","option5","spdMax","spdI","vec0","vec1","vec2","myLength","mySPX","mySPY","mySPRadius","myBltX","myBltY","myHitRadius","myPlayerX","myPlayerY","myPlayerRadius","myBuzzRadius","hitCheck","playerOpacity","playerSpd","keyCode","code","isDown","isUp","undefined","downHandler","event","preventDefault","upHandler","addEventListener","bind","moveSpeed","textureLoader","TextureLoader","crossOrigin","rendererT","WebGLRenderer","autoClear","setPixelRatio","shadowMap","enabled","setClearColor","setSize","addClass","scenePlayer","Scene","cameraPlayer","OrthographicCamera","z","set","geometryPlayer","BoxGeometry","materialPlayer","MeshLambertMaterial","color","opacity","cube","light","DirectionalLight","normalize","sceneBG","fog","Fog","cameraBG","PerspectiveCamera","lookAt","ambientLight","AmbientLight","multiplyScalar","directionalLight","target","copy","shadow","camera","bottom","near","far","bias","mapSize","cameraHelper","CameraHelper","noiseGeometry","PlaneGeometry","noiseTexture","noiseFields","map","side","DoubleSide","rotation","receiveShadow","trees","moveTrees","eraseTrees","remove","addTrees","pos","myTree","clone","scale","sampleSquare","shadowCameraNear","shadowCameraFar","shadowBias","shadowMapSize","setValToDat","square","renderLoop","newTreeName","newTreeX","clearDepth"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 60e0d5d2b419dcd1724d","window.pixi_test = {\n  // isDebug: true\n  isDebug: false\n};\n\n\nimport Main from './_modules/_main';\n\n$(function() {\n  \"use strict\";\n  var main = new Main();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","/*\n02 : 12_keyboardMovement.htmlのほぼ丸パクリ 四角を描きたかっただけ\n03 : 四角をまともに動かせるように（斜め入力を有効に・シフトでスローを可能に）\n04 : 雪を生成して降らしてみる\n05 : こいつはいい！ まだまだ出せるぞ！ 640x480 のサイズで秒間60玉生成でおおむね60fpsキープ（GCか何かの引っかかりさえなければ）\n     秒間600玉でもちょっとひっかかるけどいけちゃう\n06 : 当たり判定を半径だけ使って簡易的に追加 すり抜けが起こり得るんじゃないかなあ\n07 : スペースキーで出現する傘オブジェクトを追加 各スプライトの原点を中心にずらした ここから素材はバージョンごとのフォルダに分ける体裁にする\n08 : せっかくなので自機狙いパターンを追加 雪じゃないねこれ\n09 : JSを外に出す\n10 : 何回か当たったら止めたり某ラスボス弾幕パターン追加したり計算を最適化したり\n11 : 2倍と0.5倍はビットシフトにする ほか気持ちばかりリファクタリング\n12 : パターン追加、letとかforEachとかパフォーマンス悪い書き方をやめてどんどん古風になってゆく 肥大化してきた\n13 : パターン追加、弾の消える範囲をもっと広めにとる\n14 : パターン追加するか、背景付けるか、弾の消えるエフェクトを作るかそのへん\n*/\n\n/**\n * Main\n * 文字通り\n */\nexport default class Main {\n  /**\n   * Main 初期化\n   */\n  constructor() {\n    this.main();\n  }\n\n  /**\n   * Main メイン\n   */\n  main(e) {\n    \"use strict\";\n    //Math\n    var myRound = Math.round,\n        myCeil = Math.ceil,\n        myRandom = Math.random,\n        mySin = Math.sin,\n        myCos = Math.cos,\n        mySqrt = Math.sqrt,\n        myPI = Math.PI;\n    var myPow = function(a, b) {\n      var c = a;\n      for (var i = 1; i < b; i++) {\n        c *= a;\n      }\n      return c;\n    };\n    var myPow2 = function(a) {\n      return a * a;\n    };\n    var myAbs = function(a) {\n      return a < 0 ? -a : a;\n    };\n    var myFloor = function(a) {\n      return a | 0;\n    };\n    var myHypot = function(a, b) {\n      return mySqrt(a * a + b * b);\n    };\n    var myTrace = function(ary) {\n      if (window.pixi_test.isDebug) {\n        console.log(ary);\n      }\n    };\n    var toRadian = function(a) {\n      return a * myPI / 180;\n    };\n    var getDecimalLength = function(num) {\n      var splittedNum = (num + '').split('.'),\n          len = 0;\n      if (splittedNum[1]) {\n        len = splittedNum[1].length;\n      }\n      return len;\n    };\n\n    //Aliases\n    var Container = PIXI.Container,\n        autoDetectRenderer = PIXI.autoDetectRenderer,\n        loader = PIXI.loader,\n        resources = PIXI.loader.resources,\n        Sprite = PIXI.Sprite;\n\n    const STAGE_WIDTH = 640;\n    const STAGE_HEIGHT = 640;\n\n    var containers = [];\n    const MAX_CONTAINERS = 5;\n    var layerIDs = {\n      'bullet': [1, 0, 0],\n      'bg': [0, 0, 0],\n      'player': 2,\n      'spatk': 3,\n      'ui': 4\n    };\n    var isEnd = false;\n    var difficulty = 'normal';\n    var isKeyboard = confirm('キーボードで操作します？');\n    var fogColor = (difficulty === 'normal') ? 0x001e43 : 0x6c2735;\n\n    //Create a Pixi stage and renderer and add the\n    //renderer.view to the DOM\n    myTrace('stage append');\n    var stage = new Container(),\n        rendererP = autoDetectRenderer(STAGE_WIDTH, STAGE_HEIGHT, {antialias: true, transparent:true, resolution: 1});\n    document.body.appendChild(rendererP.view).setAttribute('class', 'c-main');\n    stage.interactive = !isKeyboard;\n\n    //Define any variables that are used in more than one function\n    // var texturesPlayer = [],\n    //     texturesSnow4 = [];\n\n    // var texturePlayer = PIXI.Texture.fromFrame('./img/playerImg.png');\n    // texturesPlayer.push(texturesPlayer);\n    // var textureSnow4 = PIXI.Texture.fromFrame('./img/snow4x4Img.png');\n    // texturesSnow4x4.push(texturesSnow4x4);\n    var texturePlayer,\n        textureSpAtk,\n        textureSnow4,\n        textureSnow8,\n        textureSnow16,\n        textureSnow24,\n        textureSnow32,\n        textureSnow40,\n        textureSnow48,\n        textureSnow56,\n        textureSnow64,\n        textureBit,\n        textureBitDisabled;\n    // var player = new PIXI.extras.MovieClip(texturesPlayer);\n    // var snow4x4 = new PIXI.extras.MovieClip(texturesSnow4x4);\n    var player,\n        // lights = [],\n        // lightMotion,\n        spatk,\n        spatkArc;\n\n    var state;\n    var bullets = [];\n    var patterns = [];\n    var prevPattern = 0;\n    var bits = [];\n    var currentBitRadius = 80;\n\n    var frameCnt = 0;\n    var buzzCnt = 0;\n\n    var scoreRatio = 1,//倍率\n        prevScoreRatio = null,//1フレーム前の倍率（更新するかどうかの確認用）\n        rawScore = 1,//素点\n        totalScore = 0,//合計\n        // prevTotalScore = null,\n        remainingTime = 0,//今のパターンの残り時間\n        prevRemainingTime = null,\n        overallRemainingTime = 0,//今のパターンの残り時間\n        prevOverallRemainingTime = null,\n        overallEndFrame;\n\n    var blurFilter = new PIXI.filters.BlurFilter(),\n        blurFilter2 = new PIXI.filters.BlurFilter(),\n        bloomFilter = new PIXI.filters.BloomFilter();\n        // shockwaveFilter = new PIXI.filters.ShockwaveFilter(),\n        // pixelateFilter = new PIXI.filters.PixelateFilter();\n\n    var textObj = {};\n\n    var threeObj = {};\n\n    var stats;\n\n    function loadObjects() {\n      var loadedCnt = 0,\n          maxObj = 3;\n\n      function pixiLoaderCallBack() {\n        loadedCnt++;\n        callSetup();\n      }\n\n      loader\n        .add('./img/playerimg.png')\n        .add('./img/umbrellaimg.png')\n        .add('./img/snowimg4.png')\n        .add('./img/snowimg8.png')\n        .add('./img/snowimg16.png')\n        .add('./img/snowimg24.png')\n        .add('./img/snowimg32.png')\n        .add('./img/snowimg40.png')\n        .add('./img/snowimg48.png')\n        .add('./img/snowimg56.png')\n        .add('./img/snowimg64.png')\n        // .add('./img/bg1.png')\n        .add('./img/bg2.png')\n        .add('./img/bit.png')\n        .add('./img/bitd.png')\n        .load(pixiLoaderCallBack);\n\n\n      function threeLoader(name) {\n        console.log(name);\n        var mtlName = name + '.mtl',\n            objName = name + '.obj',\n            mtlLoader = new THREE.MTLLoader();\n        mtlLoader.setPath( 'obj/' );\n        mtlLoader.load( mtlName, function( materials ) {\n          materials.preload();\n          var objLoader = new THREE.OBJLoader();\n          objLoader.setMaterials( materials );\n          objLoader.setPath( 'obj/' );\n          objLoader.load( objName, function ( object ) {\n            object.traverse( function ( child ) {\n              if ( child instanceof THREE.Mesh ) {\n                child.castShadow = true;\n                // child.receiveShadow = true;\n              }\n            });\n            threeObj[name] = object;\n            loadedCnt++;\n            callSetup();\n          });\n        });\n      }\n\n      function callSetup() {\n        if (loadedCnt >= maxObj) {\n          setup();\n        }\n      }\n\n      threeLoader('dead_trees_0');\n      threeLoader('dead_trees_1');\n    }\n\n    loadObjects();\n\n\n\n    function setup() {\n      myTrace('setup');\n\n      for (let i = 0; i < MAX_CONTAINERS; i++) {\n        containers[i] = new PIXI.DisplayObjectContainer();\n        containers[i].position.x = 0;\n        containers[i].position.y = 0;\n        stage.addChild(containers[i]);\n      }\n\n      // for (var n = 0; n < 2; n++) {\n      //   texturePlayer = PIXI.Texture.fromFrame('./img/playerimg'+n+'.png');\n      //   texturesPlayer.push(texturesPlayer);\n      //   textureSnow4 = PIXI.Texture.fromFrame('./img/snow4x4img.png');\n      //   texturesSnow4x4.push(texturesSnow4x4);\n      // }\n\n      // Create the `player` sprite\n      // player = new Sprite();\n      // player.beginFill(0xFFFF00);\n      // player.lineStyle(5, 0xFF0000);\n      // player.drawRect(0, 0, 4, 4);\n      // player = new PIXI.extras.MovieClip(texturesPlayer);\n\n      /* アニメーションさせなくてもいい場合 */\n      texturePlayer = PIXI.Texture.fromFrame('./img/playerimg.png');\n      player = new Sprite(texturePlayer);\n      /* /アニメーションさせなくてもいい場合 */\n\n      player.width = 4;\n      player.height = 4;\n      player.defX = (STAGE_WIDTH + player.width) >> 1;\n      player.defY = STAGE_HEIGHT - 80;\n      player.x = player.defX;// 現在のフレームでの座標\n      player.y = player.defY;\n      player.anchor.x = 0.5;\n      player.anchor.y = 0.5;\n      player.lastX = player.defX;// ひとつ前のフレームでの座標\n      player.lastY = player.defY;\n      player.vx = 0;\n      player.vy = 0;\n      player.spd = 4;\n      player.spdSlow = 2;\n      player.keyLeft = false;\n      player.keyRight = false;\n      player.keyUp = false;\n      player.keyDown = false;\n      player.keySlow = false;\n      player.keySlowPrev = player.keySlow;\n      player.keySp = false;\n      player.mouseX = 0;\n      player.mouseY = 0;\n      // player.hitWidth = 2;\n      // player.hitHeight = 2;\n      player.hitRadius = 1;\n      player.buzzRadius = 16;\n      player.isHit = false;// このフレームで当たったかどうか\n      player.life = 3;\n      player.prevLife = null;\n      player.isInvincible = false;// 無敵中かどうか\n      player.hittedFrame = -6000;\n      containers[layerIDs.player].addChild(player);\n      // player.play();\n\n\n      // 傘の初期化はここで バックグラウンドで傘の体力を回復させたりするので\n      textureSpAtk = PIXI.Texture.fromFrame('./img/umbrellaimg.png');\n      spatk = new Sprite(textureSpAtk);\n      spatk.x = 0;// 現在のフレームでの座標\n      spatk.y = 0;\n      spatk.anchor.x = 0.5;\n      spatk.anchor.y = 0.5;\n      // spatk.lastX = spatk.x;// ひとつ前のフレームでの座標\n      // spatk.lastY = spatk.y;\n      spatk.vx = 0;\n      spatk.vy = 0;\n      // spatk.spd = 6;\n      spatk.width = 160;\n      spatk.height = 160;\n      spatk.hitRadius = 80;\n      // spatk.isHit = false;// このフレームで当たったかどうか\n      spatk.changedFrame = -100;// 最後に出したり引っ込んだりしたフレーム 1秒以内は出し入れできないとかの判定に使う 出すのはしまってから1秒後、しまうのは出してから0.2秒くらい？\n      // spatk.createdFrame = frameCnt;\n      spatk.life = 10000;\n      spatk.isUsed = false;// 表示されてるかどうか\n      spatk.usable = true;// 使えるかどうか\n      // spatk.prevUsable = true;\n\n\n      // 雪のテクスチャだけここで\n      textureSnow4 = PIXI.Texture.fromFrame('./img/snowimg4.png');\n      textureSnow8 = PIXI.Texture.fromFrame('./img/snowimg8.png');\n      textureSnow16 = PIXI.Texture.fromFrame('./img/snowimg16.png');\n      textureSnow24 = PIXI.Texture.fromFrame('./img/snowimg24.png');\n      textureSnow32 = PIXI.Texture.fromFrame('./img/snowimg32.png');\n      textureSnow40 = PIXI.Texture.fromFrame('./img/snowimg40.png');\n      textureSnow48 = PIXI.Texture.fromFrame('./img/snowimg48.png');\n      textureSnow56 = PIXI.Texture.fromFrame('./img/snowimg56.png');\n      textureSnow64 = PIXI.Texture.fromFrame('./img/snowimg64.png');\n\n\n      // 苦肉の策\n      textureBit = PIXI.Texture.fromFrame('./img/bit.png');\n      textureBitDisabled = PIXI.Texture.fromFrame('./img/bitd.png');\n\n\n      // 開始フレーム, 長さ, パターン番号\n      patterns[0] = [0, 1200, 0];\n      patterns[1] = [1200, 300, 0.9];\n      for (let i = 1; i < 3; i++) {\n        patterns.push([patterns[patterns.length - 1][0] + 60, 1200, i]);\n        patterns.push([patterns[patterns.length - 1][0] + 1200, 60, i + 0.9]);\n      }\n      patterns.push([patterns[patterns.length - 1][0] + 60, 1200, 3]);\n      patterns.push([patterns[patterns.length - 1][0] + 1200, 60, 3 + 0.9]);\n      patterns.push([patterns[patterns.length - 1][0] + 60, 1800, 4]);\n      patterns.push([patterns[patterns.length - 1][0] + 1800, 60, 4 + 0.9]);\n      patterns.push([patterns[patterns.length - 1][0] + 60, 2400, 5]);\n      patterns.push([patterns[patterns.length - 1][0] + 2400, 60, 5 + 0.9]);\n      patterns.push([patterns[patterns.length - 1][0] + 60, 3600, 6]);\n      patterns.push([patterns[patterns.length - 1][0] + 3600, 60, 6 + 0.9]);\n      overallEndFrame = patterns[patterns.length - 1][0];\n\n\n      //Capture the keyboard\n      var keys = {\n        // 'left': keyboard(37),\n        // 'up': keyboard(38),\n        // 'right': keyboard(39),\n        // 'down': keyboard(40),\n        'left': keyboard(65),// A\n        'up': keyboard(87),// W\n        'right': keyboard(68),// D\n        'down': keyboard(83),// S\n        'slow': keyboard(16),//Shift\n        'sp': keyboard(32)//Space\n      };\n\n      //Left key `press` method\n      keys.left.press = function() {\n        player.keyLeft = true;\n      };\n      //Left key `release` method\n      keys.left.release = function() {\n        player.keyLeft = false;\n      };\n\n      //Up\n      keys.up.press = function() {\n        player.keyUp = true;\n      };\n      keys.up.release = function() {\n        player.keyUp = false;\n      };\n\n      //Right\n      keys.right.press = function() {\n        player.keyRight = true;\n      };\n      keys.right.release = function() {\n        player.keyRight = false;\n      };\n\n      //Down\n      keys.down.press = function() {\n        player.keyDown = true;\n      };\n      keys.down.release = function() {\n        player.keyDown = false;\n      };\n\n      //Slow\n      keys.slow.press = function() {\n        player.keySlow = true;\n      };\n      keys.slow.release = function() {\n        player.keySlow = false;\n      };\n\n      //Special\n      keys.sp.press = function() {\n        player.keySp = true;\n      };\n      keys.sp.release = function() {\n        player.keySp = false;\n      };\n\n      if (!isKeyboard) {\n        stage.mousemove = function(mouseData) {\n          player.mouseX = rendererP.plugins.interaction.mouse.global.x;\n          player.mouseY =  rendererP.plugins.interaction.mouse.global.y;\n        };\n      }\n\n\n      // Add UI\n      textObj.scoreTtl = new PIXI.Text('', {font:'bold 20px Arial', fill:'#ffffff'});\n      textObj.scoreTtl.position.x = 10;\n      textObj.scoreTtl.position.y = 10;\n\n      textObj.scoreNum = new PIXI.Text('0', {font:'bold 20px Arial', fill:'#ffffff', align:'right'});\n      textObj.scoreNum.position.x = 144;\n      textObj.scoreNum.position.y = 10;\n      textObj.scoreNum.anchor.x = 1;\n\n      textObj.buzzTtl = new PIXI.Text('', {font:'bold 20px Arial', fill:'#ffffff'});\n      textObj.buzzTtl.position.x = 10;\n      textObj.buzzTtl.position.y = 30;\n\n      textObj.buzzNum = new PIXI.Text('0', {font:'bold 28px Arial', fill:'#ffffff'});\n      textObj.buzzNum.position.x = 10;\n      textObj.buzzNum.position.y = 30;\n\n      textObj.life = new PIXI.Text('', {font:'bold 20px Arial', fill:'#ffffff'});\n      textObj.life.position.x = 10;\n      textObj.life.position.y = 64;\n\n      textObj.remainingTimeTtl = new PIXI.Text('残り時間', {font:'bold 16px Arial', fill:'#ffffff'});\n      textObj.remainingTimeTtl.position.x = 10;\n      textObj.remainingTimeTtl.position.y = STAGE_HEIGHT - 30;\n\n      textObj.remainingTimeNum = new PIXI.Text('0', {font:'bold 16px Arial', fill:'#ffffff', align:'right'});\n      textObj.remainingTimeNum.position.x = 90;\n      textObj.remainingTimeNum.position.y = STAGE_HEIGHT - 30;\n\n      textObj.overallRemainingTime = new PIXI.Text('0', {font:'bold 16px Arial', fill:'#ffffff'});\n      textObj.overallRemainingTime.position.x = 112;\n      textObj.overallRemainingTime.position.y = STAGE_HEIGHT - 30;\n\n      Object.keys(textObj).forEach(function (key) {\n        containers[layerIDs.ui].addChild(textObj[key]);\n      });\n\n\n      //Set the game state\n      state = playState;\n\n\n      // filters\n      blurFilter.blur = 1;\n      blurFilter2.blur = 2;\n      bloomFilter.blur = 2;\n      // フィルタとブレンドモードを同時に使えない？\n      // containers[layerIDs.bullet[0]].filters = [blurFilter];\n      containers[layerIDs.bg[1]].filters = [blurFilter2];\n      containers[layerIDs.spatk].filters = [blurFilter];\n\n\n      // デバッグ用\n      if (window.pixi_test.isDebug) {\n        player.life = 65535;\n        // let ptn = 0;\n        let ptn = 11;\n        for (let i = 0; i < ptn; i++) {\n          patterns.shift();\n        }\n        frameCnt = patterns[0][0];\n      }\n\n\n      // add stats\n      stats = new Stats();\n      stats.domElement.style.position = 'absolute';\n      stats.domElement.style.top = '0px';\n      stats.domElement.style.left = '640px';\n      stats.domElement.style.zIndex = 10;\n      document.body.appendChild(stats.domElement);\n\n\n      // call background animation\n      callBG();\n\n\n      //Start the game loop\n      gameLoop();\n    }\n\n\n    function gameLoop(){\n      // myTrace('loop');\n      //Loop this function 60 times per second\n      if (player.life > 0 && !isEnd) {\n        requestAnimationFrame(gameLoop);\n      } else if (player.life === 0) {\n        alert(myFloor(frameCnt / 60) + '秒耐えられまして\\n' + myFloor(totalScore) + '0点です');\n        // myTrace([myFloor(frameCnt / 60), '秒耐えた']);\n      } else {\n        alert('おめでとうございます、こんな最後まで恐縮です\\n' + myFloor(totalScore) + '0点です');\n      }\n\n      //Update the current game state\n      state();\n\n      //Render the stage\n      rendererP.render(stage);\n    }\n\n    function getPtn() {\n      var ptn;\n      if (patterns.length > 1 && patterns[1][0] <= frameCnt) {\n        patterns.shift();\n      }\n      ptn = patterns[0];\n      return ptn;\n    }\n\n\n    function playState() {\n      // playerの移動\n      movePlayer();\n\n      //bulletの生成\n      callAddBullet();\n\n      //bulletの移動\n      moveBullets();\n\n      //苦肉の策\n      moveBits();\n\n      //傘の開閉ができるかチェック\n      setSpAtkUsable();\n\n      //傘を出したりしまったりする処理 早めにやっておく1フレームの優しさ\n      if (player.keySp === true) {\n        changeSpAtk();\n      }\n\n      //傘の被弾判定 優先度高めで\n      spHitCheck();\n\n      //傘の被弾を踏まえて残り耐久力を描画\n      drawSpAtk();\n\n      //かすり判定 被弾判定はそこから呼ぶ\n      buzzCheck();\n\n      //被弾してたときの処理\n      onHit();\n\n      //はみ出たbulletをまとめて消去 逆回しで消さないとループ時にズレるので\n      removeBullets();\n\n      //スコアを増やす（いまのところ時間経過で増やしているだけなのでここで）\n      addScore();\n\n      // テキスト情報更新\n      refreshText();\n\n      // fps表示更新\n      stats.update();\n\n      // 現フレーム数をインクリメント\n      frameCnt++;\n    }\n\n\n    function callAddBullet() {\n      var currentPtn = getPtn();\n      var currentOffsettedFrame = frameCnt - currentPtn[0];\n      var offsettedEndFrame = currentPtn[1];\n\n      if (getDecimalLength(currentPtn[2]) === 0) {\n        remainingTime = myCeil((offsettedEndFrame - currentOffsettedFrame) / 60);\n      } else {\n        remainingTime = '';\n      }\n      overallRemainingTime = myCeil((overallEndFrame - frameCnt) / 60);\n\n\n      switch (currentPtn[2]) {\n        case 0:\n          // 上からばら撒き 風なし\n          if (frameCnt % 5 === 0) {\n            // addBullet(2, 0, []);\n            addBullet(3, currentOffsettedFrame, [60]);\n          }\n          break;\n        // case 1:\n        //   // ただの上から自機狙い イージー\n        //   if (frameCnt % 12 === 1) {\n        //     addBullet(10, currentOffsettedFrame, []);\n        //   }\n        //   break;\n        case 1:\n          // 上からばら撒き 風あり\n          if (frameCnt % 6 === 0) {\n            addBullet(0, currentOffsettedFrame, []);\n            addBullet(1, currentOffsettedFrame, []);\n          }\n          break;\n        case 2:\n          // ただの上から自機狙い ノーマル\n          if (frameCnt % 4 === 1) {\n            addBullet(10, currentOffsettedFrame, []);\n          }\n          break;\n        case 3:\n          // 放射状にばら撒かれて戻っていく\n          if (frameCnt % 2 === 0 && frameCnt % 85 > 55) {\n            addBullet(50, currentOffsettedFrame, [60, [0, 100], (frameCnt % 1440) / 4]);\n          }\n          break;\n        case 4:\n          // 周囲を回転して拘束してくる\n          // if (frameCnt) {\n            // addBullet(40, currentOffsettedFrame, [[0, 300], [150, 0], 1, 0, false]);\n            // // addBullet(40, currentOffsettedFrame, [[0, 300], [150, 0], 1, 180, false]);\n            // addBullet(40, currentOffsettedFrame, [[0, 300], [150, 0], 1, 120, false]);\n            // addBullet(40, currentOffsettedFrame, [[0, 300], [150, 0], 1, 240, false]);\n            // // addBullet(40, currentOffsettedFrame, [[0, 300], [-150, 0], 1, 0, true]);\n            // // addBullet(40, currentOffsettedFrame, [[0, 300], [-150, 0], 1, 180, true]);\n\n            addBullet(43, currentOffsettedFrame, [[0, 260], [150, 0], 0.5, 0, false]);\n            addBullet(43, currentOffsettedFrame, [[0, 260], [150, 0], 0.5, 120, false]);\n            addBullet(43, currentOffsettedFrame, [[0, 260], [150, 0], 0.5, 240, false]);\n          // }\n          // if (frameCnt % 6 === 0) {\n          //   addBullet(41, currentOffsettedFrame, [[0, 300], 300, 40, 0, false]);\n          //   addBullet(41, currentOffsettedFrame, [[0, 300], 300, 40, 90, false]);\n          // }\n          if (frameCnt % 20 === 0 && currentOffsettedFrame > 360) {\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 0, 1, false]);\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 180, -1, false]);\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 0, -1, false]);\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 180, 1, false]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 0, 1, false]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 0, -1, false]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 120, 1, false]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 120, -1, false]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 240, 1, false]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 240, -1, false]);\n          } else if (frameCnt % 20 === 10 && currentOffsettedFrame > 360) {\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 0, 1, true]);\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 180, -1, true]);\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 0, -1, true]);\n            // addBullet(42, currentOffsettedFrame, [[0, 300], 150, 1, 180, 1, true]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 0, 1, true]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 0, -1, true]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 120, 1, true]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 120, -1, true]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 240, 1, true]);\n            addBullet(42, currentOffsettedFrame, [[0, 260], 150, 1, 240, -1, true]);\n          }\n          break;\n        case 5:\n          // 某STGラストのアレを縦にした自称オマージュ\n          if (frameCnt % 24 === 1) {\n            addBullet(60, currentOffsettedFrame, [90, 150, 196, false, -4]);\n            addBullet(60, currentOffsettedFrame, [270, 150, 198, true, STAGE_HEIGHT + 4]);\n          }\n          if (frameCnt % 300 > 60 && frameCnt % 8 === 1) {\n            addBullet(31, currentOffsettedFrame, []);\n            // addBullet(32, currentOffsettedFrame, []);\n          }\n          break;\n        case 6:\n          // 裏パーフェクトサマーアイスっぽい…何かだよ\n          let randomDegree,\n              myDegree = (currentOffsettedFrame % 2880) * 0.125 + 270,\n              myRadian = toRadian(myDegree),\n              // myDefX = 120 * myCos(myRadian) + (STAGE_WIDTH >> 1),\n              myDefX = STAGE_WIDTH >> 1,\n              myDefY = 60 * mySin(myRadian) + 120;\n          if (frameCnt % 10 === 1) {\n            for (let i = 0; i < 6; i++) {\n              addBullet(70, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: i * 60, isReverse: false});\n              addBullet(70, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: i * 60, isReverse: true});\n            }\n          }\n          if (currentOffsettedFrame > 900 && frameCnt % 10 === 1) {\n            randomDegree = myFloor(myRandom() * 360);\n            for (let i = 0; i < 8; i++) {\n              addBullet(71, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: randomDegree + 45 * i});\n            }\n          }\n          if (currentOffsettedFrame > 1800 && frameCnt % 15 === 0 && frameCnt % 150 > 80) {\n            var synVecX = player.x - myDefX;\n            var synVecY = player.y - myDefY;\n            var len = myHypot(synVecX, synVecY);\n            var degree = 90;\n            if (len !== 0) {\n              degree = Math.atan2(synVecY, synVecX) * ( 180 / myPI );\n            }\n            addBullet(72, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: degree - 16});\n            addBullet(72, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: degree - 8});\n            addBullet(72, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: degree});\n            addBullet(72, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: degree + 8});\n            addBullet(72, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: degree + 16});\n\n            // randomDegree = myFloor(myRandom() * 360);\n            //\n            // for (let i = 0; i < 72; i++) {\n            //   addBullet(72, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: randomDegree + 5 * i});\n            // }\n          }\n          if (currentOffsettedFrame > 2700) {\n            // if (frameCnt % 60 === 1) {\n            //   addBullet(73, currentOffsettedFrame, {defX: myDefX + 80, defY: myDefY, toX: player.x, toY: player.y});\n            // } else if (frameCnt % 60 === 31) {\n            //   addBullet(73, currentOffsettedFrame, {defX: myDefX - 80, defY: myDefY, toX: player.x, toY: player.y});\n            // }\n            if ((frameCnt + 5) % 4 === 1) {\n              randomDegree = myFloor(myRandom() * 360);\n              for (let i = 0; i < 8; i++) {\n                addBullet(71, currentOffsettedFrame, {defX: myDefX, defY: myDefY, radius: 80, offsetDegree: randomDegree + 45 * i});\n              }\n            }\n          }\n          break;\n        case 0.9:\n        case 1.9:\n        case 2.9:\n        case 3.9:\n        case 4.9:\n        case 5.9:\n        // case 6.9:\n          if (bullets.length > 0) {\n            setEraseBullets(myFloor(bullets.length * 0.1) + 10);\n          }\n          scoreRatio += 2;\n          if (prevPattern !== currentPtn[2]) {\n            player.life++;\n            prevPattern = currentPtn[2];\n          }\n          break;\n        case 6.9:\n          isEnd = true;\n          // 某STGラストのアレの再現率上げたやつ\n          // if (frameCnt % 24 === 1) {\n          //   addBullet(30, currentOffsettedFrame, [90, 150, 310, false, -4]);\n          //   addBullet(30, currentOffsettedFrame, [270, 150, 310, true, STAGE_WIDTH + 4]);\n          // }\n          // if (frameCnt % 300 > 60 && frameCnt % 8 === 1) {\n          //   addBullet(31, currentOffsettedFrame, []);\n          //   // addBullet(32, currentOffsettedFrame, []);\n          // }\n          break;\n      }\n    }\n\n    function refreshText() {\n      var showedTotalScore = myFloor(totalScore);\n      var textAlpha = (player.y < STAGE_HEIGHT - 40) ? 1 : 0.3;\n      var lifeTxt = '';\n      // if (prevTotalScore != totalScore) {\n        // prevTotalScore = totalScore;\n        textObj.scoreNum.setText(showedTotalScore + '0');\n      // }\n\n      if (prevScoreRatio != scoreRatio) {\n        prevScoreRatio = scoreRatio;\n        textObj.buzzNum.setText('x' + scoreRatio);\n      }\n\n      if (player.prevLife != player.life) {\n        player.prevLife = player.life;\n        for (var i = 1; i < player.life; i++) {\n          lifeTxt += '■';\n        }\n        textObj.life.setText(lifeTxt);\n      }\n\n      if (remainingTime !== prevRemainingTime) {\n        prevRemainingTime = remainingTime;\n        textObj.remainingTimeNum.setText(remainingTime + '');\n      }\n\n      if (overallRemainingTime !== prevOverallRemainingTime) {\n        prevOverallRemainingTime = overallRemainingTime;\n        textObj.overallRemainingTime.setText('/ ' + overallRemainingTime);\n      }\n\n      textObj.remainingTimeTtl.alpha = textAlpha;\n      textObj.remainingTimeNum.alpha = textAlpha;\n      textObj.overallRemainingTime.alpha = textAlpha;\n    }\n\n    function setSpAtkUsable() {\n      if (spatk.isUsed !== true) {\n        // 前回閉じてから1.5秒以内はだめです 2割残ってないとだめです\n        spatk.usable = (frameCnt > spatk.changedFrame + 60 && spatk.life > 2000);\n      } else {\n        // 前回開いてから0.2秒以内はだめです 2割残ってないとだめです\n        spatk.usable = (frameCnt > spatk.changedFrame + 12 && spatk.life > 2000);\n      }\n    }\n\n    function changeSpAtk() {\n      // ライフが一定値以上ある時に限る方がいい と思ったけど鬼畜だなあ 1以上なら良しとしよう\n      if (spatk.isUsed !== true) {\n        if (spatk.usable) {\n          spatk.changedFrame = frameCnt;\n          spatk.isUsed = true;\n          spatk.x = player.x;\n          spatk.y = player.y;\n          containers[layerIDs.spatk].addChild(spatk);\n        }\n      } else {\n        if (spatk.usable) {\n          spatk.changedFrame = frameCnt;\n          spatk.isUsed = false;\n          containers[layerIDs.spatk].removeChild(spatk);\n        }\n      }\n    }\n\n    function drawSpAtk() {\n      // try {\n      //   var myIndex = containers[layerIDs.spatk].getChildIndex(spatkArc);\n        containers[layerIDs.spatk].removeChild(spatkArc);\n        spatkArc = null;\n      // } catch (e) {\n      //   // console.log(e);\n      // } finally {\n      //   // console.log('done');\n      // }\n      if (spatk.isUsed === true) {\n        spatkArc = new PIXI.Graphics();\n        spatkArc.lineStyle(3, 0x0075c2, 0.7);\n        spatkArc.arc(spatk.x, spatk.y, 80, toRadian(270), toRadian(myFloor(spatk.life * 360 * 0.0001) + 270));\n        containers[layerIDs.spatk].addChild(spatkArc);\n      }\n    }\n\n    function moveBits() {\n      var myCnt = bits.length;\n      for (var i = 0; i < myCnt; i++) {\n        if (bits[i].alpha > 0.1) {\n          bits[i].alpha *= 0.95;\n        } else {\n          bits[i].erase = true;\n        }\n      }\n\n      eraseBits();\n\n      addBits();\n    }\n\n    function eraseBits() {\n      // console.log(bits.length);\n      for (var i = bits.length - 1, j = 0; i >= j; i--) {\n        if (bits[i].erase === true) {\n          containers[layerIDs.bg[bits[i].layer]].removeChild(bits[i]);\n          bits.splice(i, 1);\n          // console.log('erase');\n        }\n      }\n    }\n\n    function addBits() {\n      var myBit;\n      var maxRadius = 80;\n      var minRadius = 40;\n      if (player.keySlow && currentBitRadius > minRadius) {\n        currentBitRadius -= 4;\n      } else if (!player.keySlow && currentBitRadius < maxRadius) {\n        currentBitRadius += 4;\n      }\n\n      for (var i = 0; i < 2; i++) {\n        // if (spatk.usable !== spatk.prevUsable) {\n          if (spatk.usable || spatk.isUsed) {\n            myBit = new Sprite(textureBit);\n          } else {\n            myBit = new Sprite(textureBitDisabled);\n          }\n          // spatk.prevUsable = spatk.usable;\n        // }\n        myBit.radius = currentBitRadius;\n        // myBit.maxRadius = 80;\n        // myBit.minRadius = 40;\n        myBit.x = player.x;\n        myBit.y = player.y - myBit.radius;\n        myBit.anchor.x = 0.5;\n        myBit.anchor.y = 0.5;\n        // myBit.spd = 4;\n        // myBit.degree = frameCnt % (360 / myBit.spd) * myBit.spd + i * (360 / 2);\n        myBit.degree = (frameCnt % 90) * 4 + (180 * i);// 上2行を短縮\n        if (myBit.degree > 360) myBit.degree -= 360;\n        myBit.radian = toRadian(myBit.degree);\n        myBit.alpha = 1;\n        myBit.layer = 1;\n        myBit.erase = false;\n        myBit.blendMode = PIXI.BLEND_MODES.ADD;\n        myBit.x = myBit.radius * myCos(myBit.radian) + player.x;\n        myBit.y = myBit.radius * mySin(myBit.radian) + player.y;\n\n        containers[layerIDs.bg[myBit.layer]].addChild(myBit);\n        bits[bits.length] = myBit;\n      }\n    }\n\n    function addBullet(ptn, offsettedFrame, myOptions) {\n      // myTrace('addBullet');\n      var bullet, myCnt;\n\n      switch (ptn) {\n        case 0:\n        case 2:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          // bullet.hitWidth = 2;\n          // bullet.hitHeight = 2;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;//実質的当たり判定の幅と高さ めり込むくらいがちょうどいい 半径でいい\n          bullet.defX = myFloor(myRandom() * (STAGE_WIDTH + 230) - 115);\n          bullet.defY = -8;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.lastX = bullet.defX;// 前フレームの座標\n          bullet.lastY = bullet.defY;// 同上\n          bullet.eraseX = 10;//この数値だけステージからはみ出たら消える\n          bullet.eraseY = 10;//同上\n          // bullet.rotation = 0;\n          bullet.vec = [[0,1],[0,0]];// かかっているベクトルを二次元配列で\n          bullet.nVec = [];// 上のを正規化後\n          bullet.spd = 3;// 移動速度 ベクトルの大きさ\n          bullet.atk = 100;// 傘に当たった時に削る耐久力\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 1:\n        case 3:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;\n          bullet.defX = myFloor(myRandom() * (STAGE_WIDTH + 230) - 115);\n          bullet.defY = -8;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 2;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.toX = bullet.defX + myFloor(myRandom() * (myOptions[0] + 1)) - (myOptions[0] >> 1);\n          bullet.toY = bullet.defY + STAGE_HEIGHT;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 10:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;\n          bullet.defX = myFloor(myRandom() * (STAGE_WIDTH + 1));\n          bullet.defY = -8;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 3;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 30:\n          for (myCnt = 0; myCnt < 12; myCnt++) {\n            bullet = new Sprite(textureSnow8);\n            bullet.layer = 0;\n            bullet.width = 8;\n            bullet.height = 8;\n            bullet.alpha = 1;\n            bullet.hitRadius = 2;\n            bullet.defX = myOptions[4];\n            bullet.defY = 78 * myCnt + 8 - 78;\n            bullet.x = bullet.defX;\n            bullet.y = bullet.defY;\n            bullet.anchor.x = 0.5;\n            bullet.anchor.y = 0.5;\n            bullet.lastX = bullet.defX;\n            bullet.lastY = bullet.defY;\n            bullet.eraseX = 10;\n            bullet.eraseY = 10;\n            bullet.vec = [[0,1],[0,0]];\n            bullet.spd = 1.6;\n            bullet.atk = 100;\n            bullet.ptn = ptn;\n            bullet.createdFrame = frameCnt;\n            bullet.offsettedFrame = offsettedFrame;\n            bullet.erase = false;\n            bullet.buzzed = false;\n            bullet.option0 = myOptions[0];\n            bullet.option1 = myOptions[1];\n            bullet.option2 = myOptions[2];\n            bullet.option3 = myOptions[3];\n            bullet.option4 = myOptions[4];\n            bullet.option5 = myOptions[5];\n            bullet.nVec = getNVec(ptn, bullet);\n            containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n            bullets[bullets.length] = bullet;\n          }\n          break;\n        case 31:\n          bullet = new Sprite(textureSnow16);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;\n          bullet.defX = myFloor(myRandom() * (STAGE_WIDTH + 230) - 115);\n          bullet.defY = -8;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.nVec = [];\n          bullet.spd = 2.5;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 32:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 6;\n          bullet.height = 6;\n          bullet.alpha = 1;\n          bullet.hitRadius = 1;\n          bullet.defX = myFloor(myRandom() * (STAGE_WIDTH + 1));\n          bullet.defY = -8;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 3;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 40:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 0;\n          bullet.spdMax = 4;\n          bullet.spdI = 0.02;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = (bullet.offsettedFrame !== 0) ? (bullet.offsettedFrame % (myOptions[2] * 360)) / myOptions[2] + myOptions[3] : 0;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          if (myOptions[4] === true) bullet.degree = 360 - bullet.degree;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.defX = myOptions[0][0] * myCos(bullet.radian) - myOptions[0][1] * mySin(bullet.radian) + player.x;\n          bullet.defY = myOptions[0][0] * mySin(bullet.radian) + myOptions[0][1] * myCos(bullet.radian) + player.y;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.toX = myOptions[1][0] * myCos(bullet.radian) - myOptions[1][1] * mySin(bullet.radian) + player.x;\n          bullet.toY = myOptions[1][0] * mySin(bullet.radian) + myOptions[1][1] * myCos(bullet.radian) + player.y;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 41:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 6;\n          bullet.height = 6;\n          bullet.alpha = 1;\n          bullet.hitRadius = 1;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 2;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = (bullet.offsettedFrame !== 0) ? (bullet.offsettedFrame % (myOptions[2] * 360)) / myOptions[2] + myOptions[3] : 0;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          if (myOptions[4] === true) bullet.degree = 360 - bullet.degree;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.radius = (bullet.offsettedFrame > 200) ? myOptions[0][1] : myOptions[0][1] + (200 - bullet.offsettedFrame);\n          bullet.defX = myOptions[0][0] * myCos(bullet.radian) - myOptions[0][1] * mySin(bullet.radian) + (STAGE_WIDTH >> 1);\n          bullet.defY = myOptions[0][0] * mySin(bullet.radian) + myOptions[0][1] * myCos(bullet.radian) + (STAGE_HEIGHT >> 1);\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.toX = player.x + myFloor(myRandom() * (myOptions[1] + 1)) - (myOptions[1] >> 1);\n          bullet.toY = player.y + myFloor(myRandom() * (myOptions[1] + 1)) - (myOptions[1] >> 1);\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 42:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 6;\n          bullet.height = 6;\n          bullet.alpha = 1;\n          bullet.hitRadius = 1;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 2;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = (bullet.offsettedFrame !== 0) ? (bullet.offsettedFrame % (myOptions[2] * 360)) / myOptions[2] + myOptions[3] : 0;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          if (myOptions[4] === true) bullet.degree = 360 - bullet.degree;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.radius = (bullet.offsettedFrame > 200) ? myOptions[0][1] : myOptions[0][1] + (200 - bullet.offsettedFrame);\n          bullet.defX = myOptions[0][0] * myCos(bullet.radian) - bullet.radius * mySin(bullet.radian) + (STAGE_WIDTH >> 1);\n          bullet.defY = myOptions[0][0] * mySin(bullet.radian) + bullet.radius * myCos(bullet.radian) + (STAGE_HEIGHT >> 1);\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 10;\n          bullet.eraseY = 10;\n          bullet.toX = bullet.defX + myFloor(myRandom() * (myOptions[1] + 1)) - (myOptions[1] >> 1);\n          bullet.toY = bullet.defY + STAGE_HEIGHT * myOptions[4];\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 43:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 0;\n          bullet.spdMax = 6;\n          bullet.spdI = 0.01;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = (bullet.offsettedFrame !== 0) ? (bullet.offsettedFrame % (myOptions[2] * 360)) / myOptions[2] + myOptions[3] : 0;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          if (myOptions[4] === true) bullet.degree = 360 - bullet.degree;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.radius = (bullet.offsettedFrame > 200) ? myOptions[0][1] : myOptions[0][1] + (200 - bullet.offsettedFrame);\n          bullet.defX = myOptions[0][0] * myCos(bullet.radian) - bullet.radius * mySin(bullet.radian) + (STAGE_WIDTH >> 1);\n          bullet.defY = myOptions[0][0] * mySin(bullet.radian) + bullet.radius * myCos(bullet.radian) + (STAGE_HEIGHT >> 1);\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 128;\n          bullet.eraseY = 128;\n          bullet.toX = myOptions[1][0] * myCos(bullet.radian) - myOptions[1][1] * mySin(bullet.radian) + (STAGE_WIDTH >> 1);\n          bullet.toY = myOptions[1][0] * mySin(bullet.radian) + myOptions[1][1] * myCos(bullet.radian) + (STAGE_HEIGHT >> 1);\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 50:\n          for (myCnt = 0; myCnt < myOptions[0]; myCnt++) {\n            bullet = new Sprite(textureSnow8);\n            bullet.layer = 0;\n            bullet.width = 8;\n            bullet.height = 8;\n            bullet.alpha = 1;\n            bullet.hitRadius = 2;\n            bullet.defX = STAGE_WIDTH >> 1;\n            bullet.defY = 80;\n            bullet.x = bullet.defX;\n            bullet.y = bullet.defY;\n            bullet.anchor.x = 0.5;\n            bullet.anchor.y = 0.5;\n            bullet.lastX = bullet.defX;\n            bullet.lastY = bullet.defY;\n            bullet.eraseX = 10;\n            bullet.eraseY = 10;\n            bullet.vec = [[0,1],[0,0]];\n            bullet.spd = -5.5;\n            bullet.spdMax = 3;\n            bullet.spdI = 0.04;\n            bullet.atk = 100;\n            bullet.ptn = ptn;\n            bullet.createdFrame = frameCnt;\n            bullet.offsettedFrame = offsettedFrame;\n            bullet.erase = false;\n            bullet.buzzed = false;\n            bullet.degree = (360 / myOptions[0] * myCnt) + myOptions[2];\n            if (bullet.degree > 360) bullet.degree -= 360;\n            bullet.radian = toRadian(bullet.degree);\n            bullet.toX = myOptions[1][0] * myCos(bullet.radian) - myOptions[1][1] * mySin(bullet.radian) + bullet.x;\n            bullet.toY = myOptions[1][0] * mySin(bullet.radian) + myOptions[1][1] * myCos(bullet.radian) + bullet.y;\n            // console.log(bullet.toX, bullet.toY, bullet.radian);\n            bullet.nVec = getNVec(ptn, bullet);\n            containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n            bullets[bullets.length] = bullet;\n          }\n          break;\n        case 60:\n          for (myCnt = 0; myCnt < 12; myCnt++) {\n            bullet = new Sprite(textureSnow16);\n            bullet.layer = 0;\n            bullet.width = 12;\n            bullet.height = 12;\n            bullet.alpha = 1;\n            // bullet.alpha = myRandom() * 0.6 + 0.4;\n            bullet.hitRadius = 3;\n            bullet.defX = 78 * myCnt + 8 - 78;\n            bullet.defX = (myOptions[3]) ? bullet.defX - ((offsettedFrame * 0.1) % 78) : bullet.defX + ((offsettedFrame * 0.1) % 78);\n            bullet.defY = myOptions[4];\n            bullet.x = bullet.defX;\n            bullet.y = bullet.defY;\n            bullet.anchor.x = 0.5;\n            bullet.anchor.y = 0.5;\n            bullet.lastX = bullet.defX;\n            bullet.lastY = bullet.defY;\n            bullet.eraseX = 400;\n            bullet.eraseY = 10;\n            bullet.vec = [[0,1],[0,0]];\n            bullet.spd = 1.6;\n            bullet.atk = 100;\n            bullet.ptn = ptn;\n            bullet.createdFrame = frameCnt;\n            bullet.offsettedFrame = offsettedFrame;\n            bullet.erase = false;\n            bullet.buzzed = false;\n            bullet.option0 = myOptions[0];\n            bullet.option1 = myOptions[1];\n            bullet.option2 = myOptions[2];\n            bullet.option3 = myOptions[3];\n            bullet.option4 = myOptions[4];\n            bullet.option5 = myOptions[5];\n            bullet.nVec = getNVec(ptn, bullet);\n            containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n            bullets[bullets.length] = bullet;\n            // bullet.blendMode = PIXI.BLEND_MODES.ADD;\n\n            // bullet.blendMode = PIXI.BLEND_MODES.NORMAL;\n            // bullet.blendMode = PIXI.BLEND_MODES.MULTIPLY;\n            // bullet.blendMode = PIXI.BLEND_MODES.SCREEN;\n            // bullet.blendMode = PIXI.BLEND_MODES.OVERLAY;\n            // bullet.blendMode = PIXI.BLEND_MODES.DARKEN;\n            // bullet.blendMode = PIXI.BLEND_MODES.LIGHTEN;\n          }\n          break;\n        case 70:\n          bullet = new Sprite(textureSnow8);\n          bullet.layer = 0;\n          bullet.width = 8;\n          bullet.height = 8;\n          bullet.alpha = 1;\n          bullet.hitRadius = 2;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 1;\n          bullet.spdMax = 3;\n          bullet.spdI = 0.02;\n          bullet.atk = 100;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = (bullet.offsettedFrame !== 0) ? (bullet.offsettedFrame % 1440) * 0.25 + myOptions.offsetDegree : myOptions.offsetDegree;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          if (myOptions.isReverse === true) bullet.degree = 360 - bullet.degree;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.defX = myOptions.defX;\n          bullet.defY = myOptions.defY;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 16;\n          bullet.eraseY = 16;\n          bullet.toX = myOptions.radius * myCos(bullet.radian) + myOptions.defX;\n          bullet.toY = myOptions.radius * mySin(bullet.radian) + myOptions.defY;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 71:\n          bullet = new Sprite(textureSnow16);\n          bullet.layer = 0;\n          bullet.width = 16;\n          bullet.height = 16;\n          bullet.alpha = 1;\n          bullet.hitRadius = 4;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 0;\n          bullet.spdMax = 5;\n          bullet.spdI = 0.015;\n          bullet.atk = 800;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = myOptions.offsetDegree;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.defX = myOptions.defX;\n          bullet.defY = myOptions.defY;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 24;\n          bullet.eraseY = 24;\n          bullet.toX = myOptions.radius * myCos(bullet.radian) + myOptions.defX;\n          bullet.toY = myOptions.radius * mySin(bullet.radian) + myOptions.defY;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 72:\n          bullet = new Sprite(textureSnow16);\n          bullet.layer = 0;\n          bullet.width = 12;\n          bullet.height = 12;\n          bullet.alpha = 1;\n          bullet.hitRadius = 4;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 1;\n          bullet.spdMax = 4;\n          bullet.spdI = 0.05;\n          bullet.atk = 200;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.degree = myOptions.offsetDegree;\n          if (bullet.degree > 360) bullet.degree -= 360;\n          bullet.radian = toRadian(bullet.degree);\n          bullet.defX = myOptions.defX;\n          bullet.defY = myOptions.defY;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 16;\n          bullet.eraseY = 16;\n          bullet.toX = myOptions.radius * myCos(bullet.radian) + myOptions.defX;\n          bullet.toY = myOptions.radius * mySin(bullet.radian) + myOptions.defY;\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n        case 73:\n          bullet = new Sprite(textureSnow48);\n          bullet.layer = 0;\n          bullet.width = 24;\n          bullet.height = 24;\n          bullet.alpha = 1;\n          bullet.hitRadius = 8;\n          bullet.anchor.x = 0.5;\n          bullet.anchor.y = 0.5;\n          bullet.vec = [[0,1],[0,0]];\n          bullet.spd = 0.1;\n          bullet.spdMax = 3;\n          bullet.spdI = 0.04;\n          bullet.atk = 2000;\n          bullet.ptn = ptn;\n          bullet.createdFrame = frameCnt;\n          bullet.offsettedFrame = offsettedFrame;\n          bullet.erase = false;\n          bullet.buzzed = false;\n          bullet.defX = myOptions.defX;\n          bullet.defY = myOptions.defY;\n          bullet.x = bullet.defX;\n          bullet.y = bullet.defY;\n          bullet.lastX = bullet.defX;\n          bullet.lastY = bullet.defY;\n          bullet.eraseX = 32;\n          bullet.eraseY = 32;\n          if (myOptions.defX !== myOptions.toX && myOptions.defY !== myOptions.toY) {\n            bullet.toX = myOptions.toX;\n            bullet.toY = myOptions.toY;\n          } else {\n            bullet.toX = myOptions.toX;\n            bullet.toY = 80;\n          }\n          bullet.nVec = getNVec(ptn, bullet);\n          containers[layerIDs.bullet[bullet.layer]].addChild(bullet);\n          bullets[bullets.length] = bullet;\n          break;\n      }\n    }\n\n    function getNVec(ptn, bullet) {\n      var vec0, vec1, vec2, synVecX, synVecY, len, nVec = [0, 0];\n      switch (ptn) {\n        case 1:\n        case 3:\n        case 40:\n        case 41:\n        case 42:\n        case 43:\n        case 50:\n        case 70:\n        case 71:\n        case 72:\n        case 73:\n          // synVec = [player.x - bullet.x, player.y - bullet.y];\n          synVecX = bullet.toX - bullet.x;\n          synVecY = bullet.toY - bullet.y;\n          len = myHypot(synVecX, synVecY);\n          if (len !== 0) {\n            nVec = [synVecX / len, synVecY / len];\n          } else {\n            nVec = [0, 1];\n          }\n          break;\n        case 10:\n          synVecX = player.x - bullet.x;\n          synVecY = player.y - bullet.y;\n          len = myHypot(synVecX, synVecY);\n          if (len !== 0) {\n            nVec = [synVecX / len, synVecY / len];\n          } else {\n            nVec = [0, 1];\n          }\n          break;\n        case 30:\n          // vec0 = (bullet.offsettedFrame * 0.1 + bullet.option1) % 360;\n          // vec0 = mySin(toRadian(vec0)) * 30 + bullet.option0;\n          // vec0 = toRadian(vec0);\n          vec0 = toRadian(mySin(toRadian((bullet.offsettedFrame * 0.1 + bullet.option1) % 360)) * 30 + bullet.option0);//上3行の短縮。何か非効率なような\n          synVecX = mySin(vec0);\n          synVecY = myCos(vec0);\n          len = myHypot(synVecX, synVecY);\n          if (len !== 0) {\n            nVec = [synVecX / len, synVecY / len];\n          } else {\n            nVec = [0, 0];\n          }\n          if (bullet.option2 > bullet.offsettedFrame) {\n            if (bullet.option3 === false) {\n              nVec[0] = 1;\n            } else {\n              nVec[0] = -1;\n            }\n            nVec[1] = 0;\n          }\n          break;\n        case 31:\n          synVecX = bullet.vec[0][0] + bullet.vec[1][0];\n          synVecY = bullet.vec[0][1] + bullet.vec[1][1];\n          len = myHypot(synVecX, synVecY);\n          if (len !== 0) {\n            nVec = [synVecX / len, synVecY / len];\n          } else {\n            nVec = [0, 0];\n          }\n          break;\n        case 32:\n          synVecX = player.x - bullet.x;\n          synVecY = player.y - bullet.y;\n          len = myHypot(synVecX, synVecY);\n          if (len !== 0) {\n            nVec = [synVecX / len, synVecY / len];\n          } else {\n            nVec = [0, 1];\n          }\n          break;\n        case 60:\n          // いらない わすれた\n          // vec0 = (bullet.offsettedFrame * 0.15 + bullet.option1) % 360;\n          // vec0 = mySin(toRadian(vec0)) * 30 + bullet.option0;\n          // vec0 = toRadian(vec0);\n\n          // 傾ける場合\n          // vec0 = toRadian(mySin(toRadian((bullet.offsettedFrame * 0.15 + bullet.option1) % 360)) * 30 + bullet.option0);//上3行の短縮\n          // synVecX = myCos(vec0);\n          // synVecY = mySin(vec0);\n          // len = myHypot(synVecX, synVecY);\n          // if (len !== 0) {\n          //   nVec = [synVecX / len, synVecY / len];\n          // } else {\n          //   nVec = [0, 0];\n          // }\n          // if (bullet.option2 > bullet.offsettedFrame) {\n          //   if (bullet.option3 === false) {\n          //     nVec[1] = 1;\n          //   } else {\n          //     nVec[1] = -1;\n          //   }\n          //   nVec[0] = 0;\n          // }\n\n          // 傾けない場合\n          // if (bullet.option2 > bullet.offsettedFrame) {\n            if (bullet.option3 === false) {\n              nVec = [0, 1];\n            } else {\n              nVec = [0, -1];\n            }\n          // }\n          // nVec = [0, -1];\n          break;\n      }\n      return nVec;\n    }\n\n    function moveBullets() {\n      var synVecX, synVecY, len, vx, vy, vec0, vec1, vec2;\n      for (var i = 0, j = bullets.length; i < j; i++) {\n        // この時点での座標を格納\n        bullets[i].lastX = bullets[i].x;\n        bullets[i].lastY = bullets[i].y;\n\n        switch (bullets[i].ptn) {\n          case 3:// 普通の等速直線運動\n          case 10:\n          case 30:\n          case 31:\n          case 32:\n          case 41:\n          case 42:\n          case 60:\n            bullets[i].x = bullets[i].lastX + bullets[i].nVec[0] * bullets[i].spd;\n            bullets[i].y = bullets[i].lastY + bullets[i].nVec[1] * bullets[i].spd;\n            break;\n          case 0:\n            // ベクトルを求めて移動後の座標を計算し移動\n            bullets[i].vec[1] = [bullets[i].vec[1][0] - 0.002, 0];// ちょっと風を\n            if (bullets[i].vec[1][0] > 0.1) {\n              bullets[i].vec[1][0] = 0.1;\n            }\n            synVecX = bullets[i].vec[0][0] + bullets[i].vec[1][0];\n            synVecY = bullets[i].vec[0][1] + bullets[i].vec[1][1];// ベクトル合成\n            len = myHypot(synVecX, synVecY);// ベクトルの長さ\n            if (len !== 0) {\n              bullets[i].nVec = [synVecX / len, synVecY / len];// 正規化\n            } else {\n              bullets[i].nVec = [0, 0];\n            }\n            bullets[i].x = bullets[i].lastX + bullets[i].nVec[0] * bullets[i].spd;\n            bullets[i].y = bullets[i].lastY + bullets[i].nVec[1] * bullets[i].spd;\n            break;\n          case 1:\n            bullets[i].vec[1] = [bullets[i].vec[1][0] - 0.001, 0];// ちょっと風を\n            if (bullets[i].vec[1][0] > 0.05) {\n              bullets[i].vec[1][0] = 0.05;\n            }\n            synVecX = bullets[i].vec[0][0] + bullets[i].vec[1][0];\n            synVecY = bullets[i].vec[0][1] + bullets[i].vec[1][1];\n            len = myHypot(synVecX, synVecY);\n            if (len !== 0) {\n              bullets[i].nVec = [synVecX / len, synVecY / len];\n            } else {\n              bullets[i].nVec = [0, 0];\n            }\n            bullets[i].x = bullets[i].lastX + bullets[i].nVec[0] * bullets[i].spd;\n            bullets[i].y = bullets[i].lastY + bullets[i].nVec[1] * bullets[i].spd;\n            break;\n          case 40:\n          case 43:\n          case 70:\n          case 71:\n          case 72:\n          case 73:\n            if (bullets[i].spd < bullets[i].spdMax) bullets[i].spd += bullets[i].spdI;\n            bullets[i].x = bullets[i].lastX + bullets[i].nVec[0] * bullets[i].spd;\n            bullets[i].y = bullets[i].lastY + bullets[i].nVec[1] * bullets[i].spd;\n            break;\n          case 50:\n            if (bullets[i].spd < bullets[i].spdMax) bullets[i].spd += bullets[i].spdI;\n            bullets[i].x = bullets[i].lastX + bullets[i].nVec[0] * myAbs(bullets[i].spd);\n            bullets[i].y = bullets[i].lastY + bullets[i].nVec[1] * myAbs(bullets[i].spd);\n            break;\n        }\n\n        if (bullets[i].x < -bullets[i].eraseX || bullets[i].x > STAGE_WIDTH + bullets[i].eraseX || bullets[i].y < -bullets[i].eraseY || bullets[i].y > STAGE_HEIGHT + bullets[i].eraseY) {\n          bullets[i].erase = true;\n        }\n      }\n    }\n\n    function setEraseBullets(num) {\n      var myLength;\n      if (num > bullets.length) {\n        myLength = bullets.length;\n      } else {\n        myLength = num;\n      }\n      for (var i = 0; i < myLength; i++) {\n        bullets[i].erase = true;\n      }\n    }\n\n    function removeBullets() {\n      for (var i = bullets.length - 1, j = 0; i >= j; i--) {\n        if (bullets[i].erase === true) {\n          containers[layerIDs.bullet[bullets[i].layer]].removeChild(bullets[i]);\n          bullets.splice(i, 1);\n        }\n      }\n    }\n\n    function spHitCheck() {\n      if (spatk.isUsed !== true) {//使ってなかったら回復\n        if (spatk.life < 10000) {\n          spatk.life += 20;\n          if (spatk.life > 10000) {\n            spatk.life = 10000;\n          }\n        }\n      } else {//使ってたら以下\n        var mySPX = spatk.x,\n            mySPY = spatk.y,\n            mySPRadius = spatk.hitRadius,\n            myBltX,\n            myBltY,\n            myHitRadius;// いろいろローカルにキャッシュしておくと早そうなので\n\n        for (var i = 0, j = bullets.length; i < j; i++) {\n          myHitRadius = bullets[i].hitRadius + mySPRadius;\n          myBltX = bullets[i].x;\n          myBltY = bullets[i].y;\n          if (myAbs(myBltX - mySPX) < myHitRadius && myAbs(myBltY - mySPY) < myHitRadius) {//先に軽く矩形で判定し、通った場合のみ半径で判定する\n            // myTrace('check');\n            if (myPow2(myBltX - mySPX) + myPow2(myBltY - mySPY) <= myHitRadius * myHitRadius) {//平方根はおそそうだから使わず二乗のまま比較する\n              spatk.life -= bullets[i].atk;\n              bullets[i].erase = true;\n              // myTrace('sp hit!');\n            }\n          }\n        }\n\n        spatk.life -= 20;\n\n        if (spatk.life < 0) {\n          spatk.life = -1000;//壊れちゃったらしばらく使えないのを擬似的に。いくらなんでもつらそうならやめとく。出し入れ一秒ペナルティあるしねえ\n          // spatk.life = 0;//やさしくてもいいと思う\n          // 以下で強制的に消しちゃう\n          spatk.changedFrame = frameCnt;\n          spatk.isUsed = false;\n          spatk.usable = false;\n          containers[layerIDs.spatk].removeChild(spatk);\n        }\n      }\n    }\n\n    function buzzCheck() {\n      if (!player.isInvincible) {\n        var myPlayerX = player.x,\n            myPlayerY = player.y,\n            myPlayerRadius = player.buzzRadius,\n            myBuzzRadius;\n        for (var i = 0, j = bullets.length; i < j; i++) {\n          if (bullets[i].erase !== true) {// もう何か（たぶん傘）に当たってるものは判定しない\n            myBuzzRadius = bullets[i].hitRadius + myPlayerRadius;\n\n            if (myAbs(bullets[i].x - myPlayerX) < myBuzzRadius && myAbs(bullets[i].y - myPlayerY) < myBuzzRadius) {\n              if (bullets[i].buzzed !== true) {\n                buzzCnt++;\n                scoreRatio++;\n                bullets[i].buzzed = true;\n                // myTrace('buzz!');\n              }\n              if (player.isHit !== true) {\n                hitCheck(i);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    function hitCheck(num) {\n      var myPlayerX = player.x,\n          myPlayerY = player.y,\n          myPlayerRadius = player.hitRadius,\n          myHitRadius;// いろいろキャッシュしておくと早そうなので\n\n      myHitRadius = bullets[num].hitRadius + myPlayerRadius;\n      if (myAbs(bullets[num].x - myPlayerX) < myHitRadius && myAbs(bullets[num].y - myPlayerY) < myHitRadius) {// 矩形で判定するほうが速いので\n        player.isHit = true;\n        bullets[num].erase = true;\n        // myTrace('hit!');\n      }\n    }\n\n\n    function onHit() {\n      if (player.isHit === true) {\n        player.life -= 1;\n        // myTrace(['life:', player.life]);\n        player.x = player.defX;\n        player.y = player.defY;\n        player.isHit = false;\n        scoreRatio = myFloor(scoreRatio >> 1);//スコア倍率半分\n        if (scoreRatio < 1) scoreRatio = 1;\n        player.isInvincible = true;\n        player.hittedFrame = frameCnt;\n      }\n    }\n\n\n    function addScore() {\n      totalScore += scoreRatio * rawScore * 0.01;\n    }\n\n    function movePlayer() {\n      var playerOpacity;\n      if (isKeyboard === true) {\n        //keyboard\n        var playerSpd = (player.keySlow !== true) ? player.spd : player.spdSlow;\n        playerOpacity = (player.keySlow !== true) ? 0.5 : 1;\n        if (player.keyUp === true) {\n          if (player.keyLeft === true) {\n            player.vx = myFloor(playerSpd * -7) * 0.1;\n            player.vy = myFloor(playerSpd * -7) * 0.1;\n          } else if (player.keyRight === true) {\n            player.vx = myFloor(playerSpd * 7) * 0.1;\n            player.vy = myFloor(playerSpd * -7) * 0.1;\n          } else {\n            player.vx = 0;\n            player.vy = playerSpd * -1;\n          }\n        } else if (player.keyDown === true) {\n          if (player.keyLeft === true) {\n            player.vx = myFloor(playerSpd * -7) * 0.1;\n            player.vy = myFloor(playerSpd * 7) * 0.1;\n          } else if (player.keyRight === true) {\n            player.vx = myFloor(playerSpd * 7) * 0.1;\n            player.vy = myFloor(playerSpd * 7) * 0.1;\n          } else {\n            player.vx = 0;\n            player.vy = playerSpd;\n          }\n        } else if (player.keyLeft === true) {\n          player.vx = playerSpd * -1;\n          player.vy = 0;\n        } else if (player.keyRight === true) {\n          player.vx = playerSpd;\n          player.vy = 0;\n        } else {\n          player.vx = 0;\n          player.vy = 0;\n        }\n        player.x += player.vx;\n        player.y += player.vy;\n      } else {\n        // mouse\n        playerOpacity = 1;\n        player.x = player.mouseX;\n        player.y = player.mouseY;\n      }\n\n      // 共通\n      if (player.x > STAGE_WIDTH - (player.width >> 1)) {\n        player.x = STAGE_WIDTH - (player.width >> 1);\n      } else if (player.x < (player.width >> 1)) {\n        player.x = (player.width >> 1);\n      }\n      if (player.y > STAGE_HEIGHT - (player.height >> 1)) {\n        player.y = STAGE_HEIGHT - (player.height >> 1);\n      } else if (player.y < (player.height >> 1)) {\n        player.y = (player.height >> 1);\n      }\n      player.alpha = playerOpacity;\n\n\n      if (player.isInvincible && frameCnt > player.hittedFrame + 180) {\n        player.isInvincible = false;\n      }\n    }\n\n\n    function keyboard(keyCode) {\n      var key = {};\n      key.code = keyCode;\n      key.isDown = false;\n      key.isUp = true;\n      key.press = undefined;\n      key.release = undefined;\n\n      key.downHandler = function(event) {\n        if (event.keyCode === key.code) {\n          if (key.isUp && key.press) key.press();\n          key.isDown = true;\n          key.isUp = false;\n          // myTrace(key + 'isDown');\n        }\n        event.preventDefault();\n      };\n\n      key.upHandler = function(event) {\n        if (event.keyCode === key.code) {\n          if (key.isDown && key.release) key.release();\n          key.isDown = false;\n          key.isUp = true;\n          // myTrace(key + 'isUp');\n        }\n        event.preventDefault();\n      };\n\n      window.addEventListener(\n        \"keydown\", key.downHandler.bind(key), false\n      );\n      window.addEventListener(\n        \"keyup\", key.upHandler.bind(key), false\n      );\n      return key;\n    }\n\n\n\n    function callBG() {\n      // 共通で使うものを宣言\n      var moveSpeed = (difficulty === 'hard') ? 1 : 0.25;\n      var textureLoader = new THREE.TextureLoader();\n      textureLoader.crossOrigin = '*';\n\n\n      // レンダラの作成\n      var rendererT = new THREE.WebGLRenderer({antialias:true, alpha: true});\n      rendererT.autoClear = false;\n      // rendererT.autoClearColor = false;\n      rendererT.setPixelRatio(1);\n      rendererT.shadowMap.enabled = true;\n      // rendererT.setClearColor(0xcccccc, 1);\n      rendererT.setClearColor(fogColor, 1);\n      rendererT.setSize( STAGE_WIDTH, STAGE_HEIGHT );\n      document.body.appendChild( rendererT.domElement ).setAttribute( 'class', 'c-motion' );\n\n      if (difficulty === 'hard') {\n        $('.c-motion').addClass('t-hard');\n      }\n\n\n      // 箱のシーン\n      var scenePlayer = new THREE.Scene();\n\n      var cameraPlayer = new THREE.OrthographicCamera (0, STAGE_WIDTH, STAGE_HEIGHT, 0, 0, 1000);\n      cameraPlayer.position.z = 8;\n\n      cameraPlayer.position.set(0, 0, 0);\n      // cameraPlayer.lookAt({x: 20, y: 25, z: -40});\n\n      var geometryPlayer = new THREE.BoxGeometry( 16, 16, 16 );\n      var materialPlayer = new THREE.MeshLambertMaterial( { color: 0x00ff88, transparent: true, opacity:1 } )\n\n      // var ambientLight = new THREE.AmbientLight(0xffffff);\n      // ambientLight.color.multiplyScalar(0.2);\n      // scenePlayer.add( ambientLight );\n\n      var cube = new THREE.Mesh( geometryPlayer, materialPlayer );\n      cube.position.set(STAGE_WIDTH/2, STAGE_HEIGHT/2, -10);\n      scenePlayer.add( cube );\n\n      var light = new THREE.DirectionalLight(0xffffff);\n      // spotLight.castShadow = true;\n      light.position.set(1, 1, 1).normalize();\n      scenePlayer.add( light );\n\n\n\n      // 背景のシーン\n      var sceneBG = new THREE.Scene();\n      // sceneBG.fog = new THREE.Fog(0xcccccc, -96, 224);\n      // sceneBG.fog = new THREE.Fog(0xcccccc, -32, 320);\n      sceneBG.fog = new THREE.Fog(fogColor, -32, 320);\n      // sceneBG.fog = new THREE.FogExp2(0xcccccc, 0.008);\n\n      var cameraBG = new THREE.PerspectiveCamera(35, STAGE_WIDTH / STAGE_HEIGHT, 0.1, 1000);\n\n      cameraBG.position.set(55, 30, 40);\n      cameraBG.lookAt({x: 20, y: 25, z: -40});\n\n\n      var ambientLight = new THREE.AmbientLight(0xffffff);\n      ambientLight.color.multiplyScalar(0.2);\n      sceneBG.add( ambientLight );\n\n      var directionalLight = new THREE.DirectionalLight(0xffffff);\n      // directionalLight.position.set(-10, 2, 0).normalize();\n      directionalLight.position.set( -144, 128, 72 );\n      directionalLight.target.position.copy(sceneBG.position);\n      directionalLight.castShadow = true;\n      directionalLight.shadow.camera.left = -384;\n      directionalLight.shadow.camera.top = -384;\n      directionalLight.shadow.camera.right = 384;\n      directionalLight.shadow.camera.bottom = 384;\n      directionalLight.shadow.camera.near = 20;\n      directionalLight.shadow.camera.far = 384;\n      directionalLight.shadow.bias = -0.0001;\n      directionalLight.shadow.mapSize.width = directionalLight.shadow.mapSize.height = 2048;\n      sceneBG.add( directionalLight );\n\n      let cameraHelper = new THREE.CameraHelper(directionalLight.shadow.camera);\n      sceneBG.add(cameraHelper);\n\n\n      // var cubeGeometry = new THREE.BoxGeometry( 16, 16, 16 );\n      // var cubeMaterial = new THREE.MeshLambertMaterial( { color: 0x00ff88, side: THREE.DoubleSide, transparent: false } );\n      //\n      // var cube = [];\n      // for (let i = 0; i < 500; i++) {\n      //   cube[i] = new THREE.Mesh( cubeGeometry, cubeMaterial );\n      //   cube[i].position.set(myRandom() * 1000 - 500, myRandom() * 1000 - 500, myRandom() * 1000 - 500);\n      //   cube[i].castShadow = true;\n      //   cube[i].receiveShadow = true;\n      //   sceneBG.add( cube[i] );\n      // }\n\n\n      var noiseGeometry = new THREE.PlaneGeometry( 256, 256, 1, 1 );\n      // var simplexNoise = new SimplexNoise();\n      // for ( let i = 0; i < noiseGeometry.vertices.length; i++ ) {\n      //   let vertex = noiseGeometry.vertices[ i ];\n      //   vertex.z = simplexNoise.noise( vertex.x / 10, vertex.y / 10 );\n      // }\n      // noiseGeometry.computeFaceNormals();\n      // noiseGeometry.computeVertexNormals();\n\n      // var noiseGeometry = new THREE.CylinderGeometry( 30, 30, 100, 96);\n\n      var noiseTexture = textureLoader.load('./img/field21.png');\n      // noiseTexture.wrapS = noiseTexture.wrapT = THREE.MirroredRepeatWrapping;\n      // noiseTexture.repeat.set( 2, 2 );\n      var noiseFields = [];\n      for (var i = 0; i < 2; i++) {\n        noiseFields[i] = new THREE.Mesh( noiseGeometry, new THREE.MeshLambertMaterial( { /*color: 0xdddddd,*/ map: noiseTexture, side: THREE.DoubleSide } ) );\n        noiseFields[i].rotation.x = myPI * -0.5;\n        // noiseFields[i].castShadow = true;\n        noiseFields[i].receiveShadow = true;\n        sceneBG.add( noiseFields[i] );\n      }\n      noiseFields[0].position.set( 0, 0, 0 );\n      noiseFields[1].position.set( 0, 0, -256 );\n\n\n      // var controls = new THREE.OrbitControls(cameraBG, rendererT.domElement);\n      // controls.rotateSpeed = 1; //回転させるときの速さ\n      // controls.zoomSpeed = 1.2; //ズームするときの速さ\n      // controls.panSpeed = 2; //パンするときの速さ\n\n\n      var trees = [];\n\n      function moveTrees() {\n        for (var i = 0, j = trees.length; i < j; i++) {\n          if (trees[i].position.z < 128) {\n            trees[i].position.z += moveSpeed;\n          } else {\n            trees[i].erase = true;\n          }\n        }\n      }\n\n      function eraseTrees() {\n        for (var i = trees.length - 1, j = 0; i >= j; i--) {\n          if (trees[i].erase === true) {\n            sceneBG.remove( trees[i] );\n            trees.splice(i, 1);\n            // console.log('eraseTrees');\n          }\n        }\n      }\n\n      function addTrees(objName, pos) {\n        // console.log('addTrees', objName, pos);\n        var myTree = threeObj[objName].clone();\n        myTree.erase = false;\n        myTree.position.x = pos[0];\n        myTree.position.y = pos[1];\n        myTree.position.z = pos[2];\n        myTree.rotation.y = toRadian(myFloor(myRandom() * 360));\n        myTree.scale.set(0.2, 0.2, 0.2);\n        myTree.castShadow = true;\n        myTree.receiveShadow = true;\n        // trees.push(myTree);\n        trees[trees.length] = myTree;\n        sceneBG.add(myTree);\n      }\n\n\n      // shadowControls\n      var sampleSquare = function() {\n        this.x = 0;\n        this.y = 600;\n        this.z = 0;\n        // this.shadowCameraLeft = -60;\n        // this.shadowCameraTop = -60;\n        // this.shadowCameraRight = 60;\n        // this.shadowCameraBottom = 60;\n        this.shadowCameraNear = 20;\n        this.shadowCameraFar = 412;\n        this.shadowBias = -0.0001;\n        this.shadowMapSize = 2048;\n      };\n      function setValToDat() {\n        directionalLight.position.set( square.x, square.y, square.z );\n        // directionalLight.shadow.camera.left = square.shadowCameraLeft;\n        // directionalLight.shadow.camera.top = square.shadowCameraTop;\n        // directionalLight.shadow.camera.right = square.shadowCameraRight;\n        // directionalLight.shadow.camera.bottom = square.shadowCameraBottom;\n        directionalLight.shadow.camera.near = square.shadowCameraNear;\n        directionalLight.shadow.camera.far = square.shadowCameraFar;\n        directionalLight.shadow.bias = square.shadowBias;\n        directionalLight.shadow.mapSize.width = directionalLight.shadow.mapSize.height = square.shadowMapSize;\n      }\n      /*\n      var square = new sampleSquare();\n      var gui = new dat.GUI();\n      console.log('gui.add');\n      gui.add(square, 'x').onChange(setValToDat);\n      gui.add(square, 'y').onChange(setValToDat);\n      gui.add(square, 'z').onChange(setValToDat);\n      // gui.add(square, 'shadowCameraLeft').onChange(setValToDat);\n      // gui.add(square, 'shadowCameraTop').onChange(setValToDat);\n      // gui.add(square, 'shadowCameraRight').onChange(setValToDat);\n      // gui.add(square, 'shadowCameraBottom').onChange(setValToDat);\n      gui.add(square, 'shadowCameraNear').onChange(setValToDat);\n      gui.add(square, 'shadowCameraFar').onChange(setValToDat);\n      gui.add(square, 'shadowBias').onChange(setValToDat);\n      gui.add(square, 'shadowMapSize').onChange(setValToDat);\n      // /shadowControls\n      */\n\n\n      // Render Loop\n      var renderLoop = function () {\n        // if (frameCnt % 2 === 0) {\n          for (var i = 0, j = noiseFields.length; i < j; i++) {\n            if (noiseFields[i].position.z < 128) {\n              noiseFields[i].position.z += moveSpeed;\n            } else {\n              noiseFields[i].position.z -= (512 - moveSpeed);\n            }\n          }\n\n          moveTrees();\n\n          eraseTrees();\n\n          if (frameCnt % 60 === 0 && myRandom() < 0.7) {\n            var newTreeName = (myRandom() < 0.5) ? 'dead_trees_0' : 'dead_trees_1';\n            // var newTreeX = myFloor(myRandom() * 81) + 48;\n            // if (myRandom() < 0.5) newTreeX *= -1;\n            var newTreeX = myFloor(myRandom() * 91) + 8;\n            newTreeX *= -1;\n            addTrees(newTreeName, [newTreeX, 0, -312]);\n          }\n\n          rendererT.clearDepth();\n          rendererT.render(sceneBG, cameraBG);\n\n          cube.rotation.x += 0.03;\n          cube.rotation.y += 0.03;\n          cube.position.x = player.x;\n          cube.position.y = STAGE_HEIGHT - player.y;\n          materialPlayer.opacity = (!player.isInvincible) ? 1 : 0.3 + myFloor(frameCnt % 8 * 0.25) * 0.5;\n          rendererT.render(scenePlayer, cameraPlayer);\n\n          // controls.update();\n        // }\n\n        if (player.life !== 0 && isEnd === false) {\n          requestAnimationFrame( renderLoop );\n        }\n      };\n\n      renderLoop();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/_modules/_main.js"],"sourceRoot":""}